# 天机AI - 玄学核心知识库

## 📚 资料来源

### 开源项目参考
1. **qfdk/qimen** (140 stars)
   - 奇门遁甲完整算法
   - 茅山派排盘方法
   - MIT License
   - GitHub: https://github.com/qfdk/qimen

2. **lunar-javascript** 
   - 中国农历计算
   - 天干地支转换
   - 节气计算

---

## 🔢 基础数据结构

### 天干地支
```javascript
天干(10个): 甲、乙、丙、丁、戊、己、庚、辛、壬、癸
地支(12个): 子、丑、寅、卯、辰、巳、午、未、申、酉、戌、亥
```

### 五行属性
```javascript
五行对应:
- 木: 甲乙寅卯 (绿色 #4CAF50)
- 火: 丙丁巳午 (红色 #F44336)
- 土: 戊己辰戌丑未 (棕色 #795548)
- 金: 庚辛申酉 (橙色 #FF9800)
- 水: 壬癸亥子 (蓝色 #03A9F4)

五行生克:
生: 木→火→土→金→水→木
克: 木克土, 土克水, 水克火, 火克金, 金克木
```

---

## 🎯 核心算法

### 1. 八字计算 (Four Pillars)

#### 输入
```javascript
{
  year: 1990,
  month: 5,
  day: 20,
  hour: 14,
  minute: 30
}
```

#### 输出
```javascript
{
  year_pillar: "庚午",   // 年柱
  month_pillar: "辛巳",  // 月柱
  day_pillar: "甲子",    // 日柱
  hour_pillar: "辛未",   // 时柱
  wuxing: {              // 五行分析
    mu: 1,    // 木 10%
    huo: 2,   // 火 20%
    tu: 2,    // 土 20%
    jin: 3,   // 金 30%
    shui: 1   // 水 10%
  }
}
```

#### 算法步骤
```
1. 公历 → 农历转换
2. 年柱: 根据年份天干地支
3. 月柱: 根据节气和年干
4. 日柱: 根据日期计算
5. 时柱: 根据时辰和日干
6. 五行统计: 统计八字中五行数量
```

---

### 2. 奇门遁甲 (Qimen Dunjia)

#### 核心要素
```javascript
九宫:
1(坎-北) 2(坤-西南) 3(震-东)
4(巽-东南) 5(中宫) 6(乾-西北)
7(兑-西) 8(艮-东北) 9(离-南)

九星:
天蓬(水)、天芮(土)、天冲(木)、天辅(木)、
天禽(土)、天心(金)、天柱(金)、天任(土)、天英(火)

八门:
休、生、伤、杜、景、死、惊、开
(吉门: 休生景开, 凶门: 伤杜死惊)

八神:
值符、腾蛇、太阴、六合、白虎、玄武、九地、九天
```

#### 算法流程
```
1. 确定节气 (24节气)
2. 确定三元 (上元/中元/下元, 每5天一元)
3. 确定阴阳遁 (冬至后阳遁, 夏至后阴遁)
4. 确定局数 (1-9局)
5. 排地盘 (固定不动)
6. 排天盘 (根据时辰旋转)
7. 排八门 (根据值使)
8. 排八神 (根据值符)
9. 排暗干 (隐藏天干)
```

---

### 3. 姓名学 (Name Analysis)

#### 三才五格
```javascript
天格 = 姓氏笔画 + 1
人格 = 姓氏最后字 + 名字第一字
地格 = 名字笔画总和
外格 = 总格 - 人格 + 1
总格 = 姓名总笔画

五行属性:
1,2 → 木
3,4 → 火
5,6 → 土
7,8 → 金
9,0 → 水
```

#### 吉凶数理
```javascript
大吉: 1,3,5,6,7,8,11,13,15,16,17,18,21,23,24,25,31,32,33,35,37,39,41,45,47,48,52,57,63,65,67,68,81

中吉: 26,29,38,49,51,55,58,71,73,75

凶数: 2,4,9,10,12,14,19,20,22,27,28,34,36,40,42,43,44,46,50,53,54,56,59,60,62,64,66,69,70,72,74,76,77,78,79,80
```

---

## 🎨 赛博玄学设计方案

### 界面风格

#### 配色方案
```javascript
主题色:
- 赛博紫: #9D4EDD
- 矩阵绿: #00FF41
- 深空黑: #0D1117
- 电路金: #FFD700
- 数据蓝: #00D9FF

五行色:
- 木: #4CAF50
- 火: #F44336
- 土: #795548
- 金: #FF9800
- 水: #03A9F4
```

#### 视觉元素
```
✅ Terminal 风格 (黑底绿字)
✅ 代码块展示算法
✅ 数据流动动画
✅ 太极八卦图形化
✅ 赛博朋克边框
✅ 打字机效果
```

---

## 💻 技术实现

### 前端展示
```html
<!-- Terminal 风格 -->
<div class="cyber-terminal">
  <div class="terminal-header">
    天机AI - 赛博玄学实验室
  </div>
  <div class="terminal-body">
    <span class="prompt">$</span> 
    <span class="command">tianji.calculate("八字", "1990-05-20 14:30")</span>
    <div class="output">
      > 正在初始化八字算法...
      > 加载天干地支模块... [完成]
      > 计算五行权重... [完成]
      > 调用 AI 解读引擎... [完成]
    </div>
  </div>
</div>
```

### 后端API
```javascript
// 八字计算
POST /api/bazi/calculate
{
  "datetime": "1990-05-20 14:30",
  "name": "张三"
}

// 返回
{
  "bazi": {
    "year": "庚午",
    "month": "辛巳",
    "day": "甲子",
    "hour": "辛未"
  },
  "wuxing": {
    "mu": 1, "huo": 2, "tu": 2, "jin": 3, "shui": 1
  },
  "analysis": {
    "personality": "...",
    "career": "...",
    "wealth": "...",
    "health": "..."
  },
  "algorithm": {
    "steps": [...],  // 计算步骤
    "code": "..."    // 算法代码
  }
}
```

---

## 🔬 AI 增强

### Prompt 设计
```
你是一位精通中国命理学的AI顾问。

用户的八字信息如下：
- 年柱: {year_pillar} ({year_wuxing})
- 月柱: {month_pillar} ({month_wuxing})
- 日柱: {day_pillar} ({day_wuxing})
- 时柱: {hour_pillar} ({hour_wuxing})

五行分布:
- 木: {mu}个 ({mu_percent}%)
- 火: {huo}个 ({huo_percent}%)
- 土: {tu}个 ({tu_percent}%)
- 金: {jin}个 ({jin_percent}%)
- 水: {shui}个 ({shui_percent}%)

请基于以下传统命理知识进行分析:
1. 性格特点 (结合日干和五行分布)
2. 事业发展 (结合月令和用神)
3. 财运状况 (结合财星和格局)
4. 健康建议 (结合五行平衡)
5. 今年运势 (结合流年)

要求:
- 语言现代、易懂，避免过于玄虚
- 结合心理学和统计学思维
- 给出具体可行的建议
- 不要过度承诺或恐吓
```

---

## 📊 数据可视化

### 五行雷达图
```javascript
{
  type: 'radar',
  data: {
    labels: ['木', '火', '土', '金', '水'],
    datasets: [{
      label: '五行分布',
      data: [10, 20, 20, 30, 20],
      backgroundColor: 'rgba(157, 78, 221, 0.2)',
      borderColor: '#9D4EDD'
    }]
  }
}
```

### 算法步骤流程图
```
[输入生日] 
    ↓
[公历→农历转换]
    ↓
[计算年月日时四柱]
    ↓
[统计五行分布]
    ↓
[确定用神忌神]
    ↓
[AI生成解读]
    ↓
[输出报告]
```

---

## 🔐 免责声明

```
天机AI - 免责声明

1. 本工具仅供娱乐和参考，不构成任何专业建议
2. 命运掌握在自己手中，算法只是辅助工具
3. 重大决策请咨询专业人士
4. AI解读基于概率统计，非绝对准确
5. 本平台不承担任何因使用本工具产生的后果

算法开源 · 结果仅供参考 · 理性对待
```

---

## 📚 参考资料

### 经典文献
- 《滴天髓》
- 《穷通宝鉴》
- 《子平真诠》
- 《三命通会》

### 现代解释
- 心理学角度: 性格类型论
- 统计学角度: 出生时间与性格相关性
- 社会学角度: 文化符号的心理暗示

---

**最后更新:** 2026-02-22
**版本:** v1.0
**License:** MIT (算法部分)
